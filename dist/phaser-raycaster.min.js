!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("PhaserRaycaster",[],t):"object"==typeof exports?exports.PhaserRaycaster=t():e.PhaserRaycaster=t()}(self,(function(){return function(){var e={880:function(e,t,n){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(s=r.key,o=void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(o)?o:String(o)),r)}var s,o}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var s=a(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}
/**
* @author       Marcin Walczak <contact@marcin-walczak.pl>
* @copyright    2023 Marcin Walczak
* @license      {@link https://github.com/wiserim/phaser-raycaster/blob/master/LICENSE|MIT License}
*/var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,Phaser.Plugins.ScenePlugin);var t,i,a,h=o(c);function c(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(i=h.call(this,e,t))._Raycaster=n(741).i,i}return t=c,i=[{key:"createRaycaster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scene=this.scene,new this._Raycaster(e)}}],i&&r(t.prototype,i),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}();e.exports=h},933:function(e,t,n){"use strict";function i(){return this.object.getBounds()}n.r(t),n.d(t,{getBoundingBox:function(){return i}})},163:function(e,t,n){"use strict";n.d(t,{v:function(){return y}});var i=n(812),r=n(840),s=n(121),o=n(530),a=n(99),h=n(724),c=n(739),l=n(98),u=n(933);function y(e){switch(this.object=e.object,void 0===e.type&&(e.type=e.object.type),"body"!==e.type&&"composite"!==e.type||(e.type="MatterBody"),this.type=e.type,e.type){case"Polygon":this.getPoints=s.getPoints,this.getSegments=s.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=s.updateMap;break;case"Arc":this.segmentCount=e.segmentCount?e.segmentCount:0,this.circle=!e.segmentCount,this.getPoints=o.getPoints,this.getSegments=o.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=o.updateMap,this.setSegmentCount=l.setSegmentCount;break;case"Line":this.getPoints=r.getPoints,this.getSegments=r.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=r.updateMap;break;case"Container":this.mapChild=e.mapChild?e.mapChild:null,this.segmentCount=e.segmentCount?e.segmentCount:0,this._circles=[],this.getPoints=a.getPoints,this.getSegments=a.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=a.updateMap,this._updateChildMap=a._updateChildMap,this.setSegmentCount=l.setSegmentCount;break;case"StaticTilemapLayer":case"DynamicTilemapLayer":case"TilemapLayer":this.collisionTiles=e.collisionTiles?e.collisionTiles:[],this.getPoints=h.getPoints,this.getSegments=h.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=h.updateMap,this.setCollisionTiles=h.setCollisionTiles,this.object.setOrigin(0,0);break;case"MatterBody":this.forceConvex=!!e.forceConvex,this.forceVerticesMapping=!!e.forceVerticesMapping,this.circle=!1,this.getPoints=c.getPoints,this.getSegments=c.getSegments,this.getBoundingBox=c.getBoundingBox,this.updateMap=c.updateMap;break;default:this.getPoints=i.getPoints,this.getSegments=i.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=i.updateMap}return"MatterBody"!=this.type&&"function"!=typeof this.object.getBounds&&(this.notSupported=!0),this.dynamic=1==e.dynamic,this.active=void 0===e.active||e.active,this}},6:function(e,t,n){"use strict";function i(){for(var e in"body"===this.object.type||"composite"===this.object.type?delete this.object.raycasterMap:this.object.data&&this.object.data.remove("raycasterMap"),this)delete this[e]}n.d(t,{o:function(){return i}})},530:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.active)return[];if(this._points.length>0)return this._points;var t=[],n=new Phaser.Geom.Point;if(n.x=this.object.x-this.object.displayWidth*(this.object.originX-.5),n.y=this.object.y-this.object.displayHeight*(this.object.originY-.5),e){var i,r=new Phaser.Geom.Line,s=new Phaser.Geom.Line,o=this.object.rotation;if(0!==o){var a=new Phaser.Geom.Line(this.object.x,this.object.y,n.x,n.y);Phaser.Geom.Line.SetToAngle(a,this.object.x,this.object.y,Phaser.Geom.Line.Angle(a)+o,Phaser.Geom.Line.Length(a));var h=a.getPointB();i=new Phaser.Geom.Line(e.origin.x,e.origin.y,h.x,h.y)}else i=new Phaser.Geom.Line(e.origin.x,e.origin.y,n.x,n.y);var c=Math.sqrt(Math.pow(Phaser.Geom.Line.Length(i),2)-Math.pow(this.object.radius*this.object.scaleX,2)),l=Phaser.Geom.Line.Angle(i),u=Math.asin(this.object.radius*this.object.scaleX/Phaser.Geom.Line.Length(i));Phaser.Geom.Line.SetToAngle(r,e.origin.x,e.origin.y,l-u,c),Phaser.Geom.Line.SetToAngle(s,e.origin.x,e.origin.y,l+u,c),t.push(r.getPointB()),t.push(s.getPointB()),t[0].neighbours=[t[1]],t[1].neighbours=[t[0]]}return t}function o(){return this.active?this._segments:[]}function a(){if(!this.active)return this;if(!this.segmentCount)return this._points=[],this._segments=[],this;var e=new Phaser.Geom.Point;e.x=this.object.x-this.object.displayWidth*this.object.originX+this.object.radius*this.object.scaleX,e.y=this.object.y-this.object.displayHeight*this.object.originY+this.object.radius*this.object.scaleY;var t=this.object.geom.getPoints(this.segmentCount),n=[],r=this.object.rotation;if(0!==r){var s,o=[],a=i(t);try{for(a.s();!(s=a.n()).done;){var h=s.value,c=new Phaser.Geom.Line(this.object.x,this.object.y,this.object.x+(h.x+this.object.radius)*this.object.scaleX,this.object.y+(h.y+this.object.radius)*this.object.scaleY);Phaser.Geom.Line.SetToAngle(c,this.object.x,this.object.y,Phaser.Geom.Line.Angle(c)+r,Phaser.Geom.Line.Length(c)),o.push(c.getPointB())}}catch(e){a.e(e)}finally{a.f()}t=o}else{var l,u=i(t);try{for(u.s();!(l=u.n()).done;){var y=l.value;y.x=y.x*this.object.scaleX+e.x,y.y=y.y*this.object.scaleY+e.y}}catch(e){u.e(e)}finally{u.f()}}for(var g=0,f=t.length;g<f;g++){var d=g>0?t[g-1]:t.slice(-1)[0],p=g<f-1?t[g+1]:t[0];n.push(new Phaser.Geom.Line(t[g].x,t[g].y,p.x,p.y)),t[g].neighbours=[d,p]}return this._points=t,this._segments=n,this}n.r(t),n.d(t,{getPoints:function(){return s},getSegments:function(){return o},updateMap:function(){return a}})},99:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.active)return[];var n=this._points,r=new Phaser.Geom.Point;if(r.x=this.object.x-this.object.displayWidth*this.object.originX,r.y=this.object.y-this.object.displayHeight*this.object.originY,0==this.segmentCount&&!t&&e){var s=new Phaser.Geom.Line(0,0,e.origin.x-r.x,e.origin.y-r.y);Phaser.Geom.Line.SetToAngle(s,0,0,Phaser.Geom.Line.Angle(s)-this.object.rotation,Phaser.Geom.Line.Length(s));e._raycaster.createRay({origin:{x:s.getPointB().x,y:s.getPointB().y}});var o,a,h=new Phaser.Geom.Line,c=new Phaser.Geom.Line,l=i(this._circles);try{for(l.s();!(a=l.n()).done;){var u=a.value;u.points=[],o=new Phaser.Geom.Line(e.origin.x,e.origin.y,u.x,u.y);var y=Math.sqrt(Math.pow(Phaser.Geom.Line.Length(o),2)-Math.pow(u.radius,2)),g=Phaser.Geom.Line.Angle(o),f=Math.asin(u.radius/Phaser.Geom.Line.Length(o));Phaser.Geom.Line.SetToAngle(h,e.origin.x,e.origin.y,g-f,y),Phaser.Geom.Line.SetToAngle(c,e.origin.x,e.origin.y,g+f,y),u.points.push(h.getPointB()),u.points.push(c.getPointB()),n.push(h.getPointB()),n.push(c.getPointB())}}catch(e){l.e(e)}finally{l.f()}}return n}function o(){return this.active?this._segments:[]}function a(){if(!this.active)return this;var e=[],t=[],n=this.object;this._circles=[];var r=new Phaser.Geom.Point;r.x=this.object.x-this.object.displayWidth*this.object.originX,r.y=this.object.y-this.object.displayHeight*this.object.originY;var s=n.rotation;if(this.mapChild)this._updateChildMap(this.mapChild,e,t,s,r);else{n.iterate(function(n){this._updateChildMap(n,e,t,s,r)}.bind(this));for(var o=0,a=n.list.length;o<a;o++){var h=n.list[o],c=h.data.get("raycasterMap");if(c)for(var l=o+1,u=n.list.length;l<u;l++){var y=n.list[l],g=y.data.get("raycasterMap");if(g&&Phaser.Geom.Intersects.RectangleToRectangle(h.getBounds(),y.getBounds())){var f,d=i(c.getSegments());try{for(d.s();!(f=d.n()).done;){var p,b=f.value,m=i(g.getSegments());try{for(m.s();!(p=m.n()).done;){var v=p.value,P=[];if(Phaser.Geom.Intersects.LineToLine(b,v,P))if(0!==s){var x=new Phaser.Geom.Line(n.x,n.y,P.x*n.scaleX+r.x,P.y*n.scaleY+r.y);Phaser.Geom.Line.SetToAngle(x,this.object.x,this.object.y,Phaser.Geom.Line.Angle(x)+s,Phaser.Geom.Line.Length(x)),e.push(x.getPointB())}else e.push(new Phaser.Geom.Point(P.x*n.scaleX+r.x,P.y*n.scaleX+r.y))}}catch(e){m.e(e)}finally{m.f()}}}catch(e){d.e(e)}finally{d.f()}}}}}return this._points=e,this._segments=t,this}function h(e,t,n,r,s){if(e.data||e.setDataEnabled(),!e.data.get("raycasterMapNotSupported")){var o=e.data.get("raycasterMap");if(o)o.updateMap();else{if((o=new this.constructor({object:e,segmentCount:this.segmentCount})).notSupported)return o.destroy(),void e.data.set("raycasterMapNotSupported",!0);e.data.set("raycasterMap",o)}var a,h=[],c=i(o.getPoints(!1,!0));try{for(c.s();!(a=c.n()).done;){var l=a.value;if(0!==r){var u=new Phaser.Geom.Line(this.object.x,this.object.y,l.x*this.object.scaleX+s.x,l.y*this.object.scaleY+s.y);Phaser.Geom.Line.SetToAngle(u,this.object.x,this.object.y,Phaser.Geom.Line.Angle(u)+r,Phaser.Geom.Line.Length(u)),t.push(u.getPointB())}else t.push(new Phaser.Geom.Point(l.x*this.object.scaleX+s.x,l.y*this.object.scaleX+s.y));h.push(t[t.length-1])}}catch(e){c.e(e)}finally{c.f()}var y,g=i(o.getSegments());try{for(g.s();!(y=g.n()).done;){var f=y.value;if(0!==r){var d=f.getPointA(),p=f.getPointB(),b=new Phaser.Geom.Line(this.object.x,this.object.y,d.x*this.object.scaleX+s.x,d.y*this.object.scaleY+s.y),m=new Phaser.Geom.Line(this.object.x,this.object.y,p.x*this.object.scaleX+s.x,p.y*this.object.scaleY+s.y);Phaser.Geom.Line.SetToAngle(b,this.object.x,this.object.y,Phaser.Geom.Line.Angle(b)+r,Phaser.Geom.Line.Length(b)),Phaser.Geom.Line.SetToAngle(m,this.object.x,this.object.y,Phaser.Geom.Line.Angle(m)+r,Phaser.Geom.Line.Length(m)),n.push(new Phaser.Geom.Line(b.getPointB().x,b.getPointB().y,m.getPointB().x,m.getPointB().y))}else n.push(new Phaser.Geom.Line(f.getPointA().x*this.object.scaleX+s.x,f.getPointA().y*this.object.scaleY+s.y,f.getPointB().x*this.object.scaleX+s.x,f.getPointB().y*this.object.scaleY+s.y))}}catch(e){g.e(e)}finally{g.f()}if("Arc"==o.type&&0==this.segmentCount){var v=new Phaser.Geom.Point;if(v.x=(o.object.x-o.object.displayWidth*(o.object.originX-.5))*this.object.scaleX+s.x,v.y=(o.object.y-o.object.displayHeight*(o.object.originY-.5))*this.object.scaleY+s.y,0!==r){var P=new Phaser.Geom.Line(this.object.x,this.object.y,v.x,v.y);Phaser.Geom.Line.SetToAngle(P,this.object.x,this.object.y,Phaser.Geom.Line.Angle(P)+r,Phaser.Geom.Line.Length(P)),v=P.getPointB()}this._circles.push(new Phaser.Geom.Circle(v.x,v.y,o.object.radius*o.object.scaleX*this.object.scaleX))}else if("Container"===o.type){var x,j=i(o._circles);try{for(j.s();!(x=j.n()).done;){var w=x.value,M=new Phaser.Geom.Point;if(M.x=w.x*this.object.scaleX+s.x,M.y=w.y*this.object.scaleY+s.y,0!==r){var G=new Phaser.Geom.Line(this.object.x,this.object.y,M.x,M.y);Phaser.Geom.Line.SetToAngle(G,this.object.x,this.object.y,Phaser.Geom.Line.Angle(G)+r,Phaser.Geom.Line.Length(G)),M=G.getPointB()}this._circles.push(new Phaser.Geom.Circle(M.x,M.y,w.radius*this.object.scaleX))}}catch(e){j.e(e)}finally{j.f()}}}}n.r(t),n.d(t,{_updateChildMap:function(){return h},getPoints:function(){return s},getSegments:function(){return o},updateMap:function(){return a}})},667:function(e,t,n){"use strict";function i(e,t){return this._raycaster=t||!1,this.type,this.active,this._dynamic=!1,this.circle=!1,this.object,this._points=[],this._segments=[],this.getPoints,this.getSegments,this.getBoundingBox,this.updateMap,this.config(e),this.notSupported||this.updateMap(),this}n.d(t,{D:function(){return i}}),i.prototype={config:n(163).v,destroy:n(6).o,get dynamic(){return this._dynamic},set dynamic(e){if(this._dynamic==e)return this;if(e)this._dynamic=!0,this._raycaster&&(this._raycaster.dynamicMappedObjects.push(this.object),this._raycaster._stats.mappedObjects.dynamic=this._raycaster.dynamicMappedObjects.length,this._raycaster._stats.mappedObjects.static=this._raycaster._stats.mappedObjects.total-this._raycaster._stats.mappedObjects.dynamic);else if(this._dynamic=!1,this._raycaster){var t=this._raycaster.dynamicMappedObjects.indexOf(this.object);t>=0&&this._raycaster.dynamicMappedObjects.splice(t,1),this._raycaster._stats.mappedObjects.dynamic=this._raycaster.dynamicMappedObjects.length,this._raycaster._stats.mappedObjects.static=this._raycaster._stats.mappedObjects.total-this._raycaster._stats.mappedObjects.dynamic}return this}},i.prototype.constructor=i},840:function(e,t,n){"use strict";function i(){return this.active?this._points:[]}function r(){return this.active?this._segments:[]}function s(){if(!this.active)return this;var e=[],t=[],n=new Phaser.Geom.Point;n.x=this.object.x-this.object.displayWidth*this.object.originX,n.y=this.object.y-this.object.displayHeight*this.object.originY;var i=this.object.geom.getPointA(),r=this.object.geom.getPointB(),s=this.object.rotation;if(0!==s){var o=new Phaser.Geom.Line(this.object.x,this.object.y,i.x*this.object.scaleX+n.x,i.y*this.object.scaleY+n.y);Phaser.Geom.Line.SetToAngle(o,this.object.x,this.object.y,Phaser.Geom.Line.Angle(o)+s,Phaser.Geom.Line.Length(o)),i=o.getPointB();var a=new Phaser.Geom.Line(this.object.x,this.object.y,r.x*this.object.scaleX+n.x,r.y*this.object.scaleY+n.y);Phaser.Geom.Line.SetToAngle(a,this.object.x,this.object.y,Phaser.Geom.Line.Angle(a)+s,Phaser.Geom.Line.Length(a)),r=a.getPointB(),e.push(new Phaser.Geom.Point(i.x,i.y)),e.push(new Phaser.Geom.Point(r.x,r.y)),t.push(new Phaser.Geom.Line(i.x,i.y,r.x,r.y))}else e.push(new Phaser.Geom.Point(i.x*this.object.scaleX+n.x,i.y*this.object.scaleY+n.y)),e.push(new Phaser.Geom.Point(r.x*this.object.scaleX+n.x,r.y*this.object.scaleY+n.y)),t.push(new Phaser.Geom.Line(i.x*this.object.scaleX+n.x,i.y*this.object.scaleY+n.y,r.x+n.x*this.object.scaleX,r.y*this.object.scaleY+n.y));return e[0].neighbours=[e[1]],e[1].neighbours=[e[0]],this._points=e,this._segments=t,this}n.r(t),n.d(t,{getPoints:function(){return i},getSegments:function(){return r},updateMap:function(){return s}})},739:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.active)return[];var t="body"===this.object.type||"composite"===this.object.type?this.object:this.object.body;if(e&&!this.forceVerticesMapping&&t.circleRadius>0){var n=[],i=new Phaser.Geom.Line,r=new Phaser.Geom.Line,s=new Phaser.Geom.Line(e.origin.x,e.origin.y,t.position.x,t.position.y),o=Math.sqrt(Math.pow(Phaser.Geom.Line.Length(s),2)-Math.pow(t.circleRadius*t.scale.x,2)),a=Phaser.Geom.Line.Angle(s),h=Math.asin(t.circleRadius*t.scale.x/Phaser.Geom.Line.Length(s));return Phaser.Geom.Line.SetToAngle(i,e.origin.x,e.origin.y,a-h,o),Phaser.Geom.Line.SetToAngle(r,e.origin.x,e.origin.y,a+h,o),n.push(i.getPointB()),n.push(r.getPointB()),n}return this._points}function o(){return this.active?this._segments:[]}function a(){if(!this.active)return this;var e=[],t=[],n="body"===this.object.type||"composite"===this.object.type?this.object:this.object.body,r=[n],s=!1;if(n.circleRadius>0&&!this.forceVerticesMapping)return this.circle=!0,this._points=e,this._segments=t,this;this.circle=!1,"composite"==n.type&&(r=n.bodies),(void 0===n.bounds&&"composite"==n.type||"composite"==n.type&&this.dynamic)&&(s=!0);var o,a=i(r);try{for(a.s();!(o=a.n()).done;){var h=o.value;if(1===h.parts.length||this.forceConvex){var c=h.parts[0].vertices;e.push(new Phaser.Geom.Point(c[0].x,c[0].y));for(var l=1,u=c.length;l<u;l++){var y=new Phaser.Geom.Point(c[l-1].x,c[l-1].y),g=new Phaser.Geom.Point(c[l].x,c[l].y);e.push(g);var f=new Phaser.Geom.Line(y.x,y.y,g.x,g.y);t.push(f)}var d=new Phaser.Geom.Line(c[c.length-1].x,c[c.length-1].y,c[0].x,c[0].y);t.push(d)}else if(h.parts.length>1)for(var p=function(){var n=h.parts[b].vertices,i=new Phaser.Geom.Point(n[0].x,n[0].y);void 0===e.find((function(e){return e.x==i.x&&e.y==i.y}))&&e.push(i);for(var r=function(){var r=new Phaser.Geom.Point(n[s].x,n[s].y),o=t.findIndex((function(e){return e.x1==i.x&&e.y1==i.y&&e.x2==r.x&&e.y2==r.y||e.x1==r.x&&e.y1==r.y&&e.x2==i.x&&e.y2==i.y}));if(-1!==o)return t.splice(o,1),i=r,"continue";void 0===e.find((function(e){return e.x==r.x&&e.y==r.y}))&&e.push(r);var a=new Phaser.Geom.Line(i.x,i.y,r.x,r.y);t.push(a),i=r},s=1,o=n.length;s<o;s++)r();var a=new Phaser.Geom.Line(n[n.length-1].x,n[n.length-1].y,n[0].x,n[0].y),c=t.findIndex((function(e){return e.x1==a.x1&&e.y1==a.y1&&e.x2==a.x2&&e.y2==a.y2||e.x1==a.x2&&e.y1==a.y2&&e.x2==a.x1&&e.y2==a.y1}));void 0===c&&t.push(a)},b=1,m=h.parts.length;b<m;b++)p()}}catch(e){a.e(e)}finally{a.f()}if(this._points=e,this._segments=t,s){var v=this._raycaster.scene.matter.composite.bounds(n);n.bounds=v}return this}function h(){var e="body"===this.object.type||"composite"===this.object.type?this.object.bounds:this.object.body.bounds;return new Phaser.Geom.Rectangle(e.min.x,e.min.y,e.max.x-e.min.x,e.max.y-e.min.y)}n.r(t),n.d(t,{getBoundingBox:function(){return h},getPoints:function(){return s},getSegments:function(){return o},updateMap:function(){return a}})},121:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){return this.active?this._points:[]}function o(){return this.active?this._segments:[]}function a(){if(!this.active)return this;var e=[],t=[],n=new Phaser.Geom.Point;n.x=this.object.x-this.object.displayWidth*this.object.originX,n.y=this.object.y-this.object.displayHeight*this.object.originY;var r=this.object.rotation;if(0!==r){var s,o=i(this.object.geom.points);try{for(o.s();!(s=o.n()).done;){var a=s.value,h=new Phaser.Geom.Line(this.object.x,this.object.y,a.x*this.object.scaleX+n.x,a.y*this.object.scaleY+n.y);Phaser.Geom.Line.SetToAngle(h,this.object.x,this.object.y,Phaser.Geom.Line.Angle(h)+r,Phaser.Geom.Line.Length(h)),e.push(h.getPointB())}}catch(e){o.e(e)}finally{o.f()}}else{var c,l=i(this.object.geom.points);try{for(l.s();!(c=l.n()).done;){var u=c.value;e.push(new Phaser.Geom.Point(u.x*this.object.scaleX+n.x,u.y*this.object.scaleY+n.y))}}catch(e){l.e(e)}finally{l.f()}}for(var y=0,g=e.length;y<g;y++){var f=y>0?e[y-1]:e.slice(-1)[0],d=y<g-1?e[y+1]:e[0];t.push(new Phaser.Geom.Line(e[y].x,e[y].y,d.x,d.y)),e[y].neighbours=[f,d]}for(var p=0,b=e.length;p<b;p++)p+1<b&&t.push(new Phaser.Geom.Line(e[p].x,e[p].y,e[p+1].x,e[p+1].y));return this.object.closePath||(t.pop(),e[0].neighbours.shift(),e[e.lenght-1].neighbours.pop()),this._points=e,this._segments=t,this}n.r(t),n.d(t,{getPoints:function(){return s},getSegments:function(){return o},updateMap:function(){return a}})},812:function(e,t,n){"use strict";function i(){return this.active?this._points:[]}function r(){return this.active?this._segments:[]}function s(){if(!this.active)return this;for(var e=[],t=[],n=0,i=(e=[this.object.getTopLeft(),this.object.getTopRight(),this.object.getBottomRight(),this.object.getBottomLeft()]).length;n<i;n++){var r=n>0?e[n-1]:e.slice(-1)[0],s=n<i-1?e[n+1]:e[0];t.push(new Phaser.Geom.Line(e[n].x,e[n].y,s.x,s.y)),e[n].neighbours=[r,s]}return this._points=e,this._segments=t,this}n.r(t),n.d(t,{getPoints:function(){return i},getSegments:function(){return r},updateMap:function(){return s}})},724:function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.active)return[];if(!e||e&&(0==e.detectionRange||e.detectionRange>=Phaser.Math.MAX_SAFE_INTEGER))return this._points;var t,n=[],i=r(this._points);try{for(i.s();!(t=i.n()).done;){var s=t.value;Phaser.Math.Distance.Between(e.origin.x,e.origin.y,s.x,s.y)<=e.detectionRange&&n.push(s)}}catch(e){i.e(e)}finally{i.f()}var o,a=r(this.getSegments(e));try{for(a.s();!(o=a.n()).done;){var h=o.value;Phaser.Math.Distance.Between(e.origin.x,e.origin.y,h.x1,h.y1)>e.detectionRange&&n.push(new Phaser.Geom.Point(h.x1,h.y1)),Phaser.Math.Distance.Between(e.origin.x,e.origin.y,h.x2,h.y2)>e.detectionRange&&n.push(new Phaser.Geom.Point(h.x2,h.y2))}}catch(e){a.e(e)}finally{a.f()}return n}function a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.active)return[];if(!e||e&&(0==e.detectionRange||e.detectionRange>=Phaser.Math.MAX_SAFE_INTEGER))return this._segments;var t,n=[],i=r(this._segments);try{for(i.s();!(t=i.n()).done;){var s=t.value;Phaser.Geom.Intersects.LineToCircle(s,e.detectionRangeCircle)&&n.push(s)}}catch(e){i.e(e)}finally{i.f()}return n}function h(){if(!this.active)return this;for(var e=[],t=[],n=Array(this.object.layer.data[0].length+1),r=0,s=n.length;r<s;r++)n[r]=[];var o,a,h=new Phaser.Geom.Point(this.object.x,this.object.y),c=this.object.layer.data[0],l=this.object.layer.tileWidth*this.object.scaleX,u=this.object.layer.tileHeight*this.object.scaleY;this.collisionTiles.includes(c[0].index)&&(o=new Phaser.Geom.Point(h.x,h.y),a=new Phaser.Geom.Point(l+h.x,h.y),n[0].push(o));for(var y=1,g=c.length;y<g;y++){var f=c[y];if(this.collisionTiles.includes(f.index)){var d=y*l+h.x,p=h.y;o||(o=new Phaser.Geom.Point(d,p),n[y].push(o)),a?a.x=d+l:a=new Phaser.Geom.Point(d+l,p)}else o&&(o.neighbours=[a],a.neighbours=[o],e.push(o,a),t.push(new Phaser.Geom.Line(o.x,o.y,a.x,a.y)),n[y].push(a),o=!1,a=!1)}o&&(o.neighbours=[a],a.neighbours=[o],e.push(o,a),t.push(new Phaser.Geom.Line(o.x,o.y,a.x,a.y)),n[c.length].push(a)),o=!1,a=!1;for(var b=1,m=this.object.layer.data.length-1;b<m;b++){c=this.object.layer.data[b];var v=this.object.layer.data[b-1];this.collisionTiles.includes(c[0].index)!=this.collisionTiles.includes(v[0].index)&&(o=new Phaser.Geom.Point(h.x,b*u+h.y),a=new Phaser.Geom.Point(l+h.x,b*u+h.y),n[0].push(o));for(var P=1,x=c.length;P<x;P++){var j=c[P];if(this.collisionTiles.includes(j.index)!=this.collisionTiles.includes(v[P].index)){var w=P*l+h.x,M=b*u+h.y;o||(o=new Phaser.Geom.Point(w,M),n[P].push(o)),a?a.x=w+l:a=new Phaser.Geom.Point(w+l,M)}else o&&(o.neighbours=[a],a.neighbours=[o],e.push(o,a),t.push(new Phaser.Geom.Line(o.x,o.y,a.x,a.y)),n[P].push(a),o=!1,a=!1)}o&&(o.neighbours=[a],a.neighbours=[o],e.push(o,a),t.push(new Phaser.Geom.Line(o.x,o.y,a.x,a.y)),n[c.length].push(a)),o=!1,a=!1}c=this.object.layer.data.slice(-1)[0];var G=this.object.layer.data.length*u+h.y;this.collisionTiles.includes(c[0].index)&&(o=new Phaser.Geom.Point(h.x,G),a=new Phaser.Geom.Point(l+h.x,G),n[0].push(o));for(var _=1,A=c.length;_<A;_++){var S=c[_];if(this.collisionTiles.includes(S.index)){var B=_*l+h.x;o||(o=new Phaser.Geom.Point(B,G),n[_].push(o)),a?a.x=B+l:a=new Phaser.Geom.Point(B+l,G)}else o&&(o.neighbours=[a],a.neighbours=[o],e.push(o,a),t.push(new Phaser.Geom.Line(o.x,o.y,a.x,a.y)),n[_].push(a),o=!1,a=!1)}o&&(o.neighbours=[a],a.neighbours=[o],e.push(o,a),t.push(new Phaser.Geom.Line(o.x,o.y,a.x,a.y)),n[i].push(a));for(var O=0,L=n.length;O<L;O++)for(var T=n[O],C=0,R=T.length-1;C<R;C++)t.push(new Phaser.Geom.Line(T[C].x,T[C].y,T[C+1].x,T[C+1].y)),T[C].neighbours.push(T[C+1]),T[C+1].neighbours.push(T[C]),C++;return this._points=e,this._segments=t,this}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.collisionTiles=e,this}n.r(t),n.d(t,{getPoints:function(){return o},getSegments:function(){return a},setCollisionTiles:function(){return c},updateMap:function(){return h}})},98:function(e,t,n){"use strict";function i(e){return this.segmentCount=e,this.circle=!e,this.updateMap(),this}n.r(t),n.d(t,{setSegmentCount:function(){return i}})},519:function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.angle=Phaser.Math.Angle.Normalize(e),Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.angle=Phaser.Math.Angle.Normalize(Phaser.Math.DegToRad(e)),Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this}n.d(t,{e:function(){return i},m:function(){return r}})},157:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.rayRange,o=!!r.internal&&r.internal,a=performance.now(),h={method:"cast",rays:1,testedMappedObjects:0,hitMappedObjects:0,segments:0,time:0};if(this._raycaster&&this._raycaster.boundingBox){var c=[];if(Phaser.Geom.Intersects.GetLineToRectangle(this._ray,this._raycaster.boundingBox.rectangle,c),1===c.length)e=c[0];else if(c.length>1){var l,u=i(c);try{for(u.s();!(l=u.n()).done;){var y=l.value,g=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,y.x,y.y);g<s&&(s=g,e=y)}}catch(e){u.e(e)}finally{u.f()}}else if(r.target){var f=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,r.target.x,r.target.y);this.rayRange>f&&(s=f,e=r.target)}}if(!r.objects){if(!this._raycaster)return intersections;r.objects=this._raycaster.mappedObjects}var d,p,b=i(r.objects);try{for(b.s();!(d=b.n()).done;){var m=d.value,v=void 0,P=void 0,x=[],j=!1;if(v="body"===m.type||"composite"===m.type?m.raycasterMap:m.data.get("raycasterMap"),h.testedMappedObjects++,o?P=v._boundingBox:(P=v.getBoundingBox()).setTo(P.x-.1,P.y-.1,P.width+.2,P.height+.2),0!==Phaser.Geom.Intersects.GetLineToRectangle(this._ray,P,x).length){for(var w=0,M=x;w<M.length;w++){var G=M[w];if(Phaser.Math.Distance.Between(this.origin.x,this.origin.y,G.x,G.y)<s){j=!0;break}}if(j){h.hitMappedObjects++,h.segments+=v.getSegments(this).length;var _,A=i(v.getSegments(this));try{for(A.s();!(_=A.n()).done;){var S=_.value,B=[];if(r.target){if(Phaser.Geom.Point.Equals(r.target,S.getPointA())||Phaser.Geom.Point.Equals(r.target,S.getPointB()))B=r.target;else if(!Phaser.Geom.Intersects.LineToLine(this._ray,S,B))continue}else if(!Phaser.Geom.Intersects.LineToLine(this._ray,S,B))continue;var O=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,B.x,B.y);O<s&&(s=O,e=B,n=v.object,t=S)}}catch(e){A.e(e)}finally{A.f()}if(v.circle){if(v._points.length>0)continue;if(r.target){var L,T=v.getPoints(this),C=!1,R=i(T);try{for(R.s();!(L=R.n()).done;){var I=L.value;if(Phaser.Geom.Point.Equals(r.target,I)){var D=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,I.x,I.y);if(D<s){s=D,e=I,n=v.object,C=!0;break}}}}catch(e){R.e(e)}finally{R.f()}if(C)continue}var E=[],X=new Phaser.Geom.Point;X.x=v.object.x-v.object.displayWidth*(v.object.originX-.5),X.y=v.object.y-v.object.displayHeight*(v.object.originY-.5);var k=v.object.rotation;if(0!==k){var N=new Phaser.Geom.Line(v.object.x,v.object.y,X.x,X.y);Phaser.Geom.Line.SetToAngle(N,v.object.x,v.object.y,Phaser.Geom.Line.Angle(N)+k,Phaser.Geom.Line.Length(N));var Y=N.getPointB();X.x=Y.x,X.y=Y.y}var W=new Phaser.Geom.Circle(X.x,X.y,v.object.radius*v.object.scaleX);if(Phaser.Geom.Intersects.GetLineToCircle(this._ray,W,E)){var q,z=i(E);try{for(z.s();!(q=z.n()).done;){var F=q.value,U=Phaser.Math.Distance.Between(this._ray.x1,this._ray.y1,F.x,F.y);U<s&&(s=U,e=F,n=v.object)}}catch(e){z.e(e)}finally{z.f()}}}if("Container"==v.type&&v._circles.length>0){var H,$=i(v._circles);try{for($.s();!(H=$.n()).done;){var K=H.value;if(r.target){var V,J=!1,Q=i(K.points);try{for(Q.s();!(V=Q.n()).done;){var Z=V.value;if(Phaser.Geom.Point.Equals(r.target,Z)){var ee=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,Z.x,Z.y);if(ee<s){s=ee,e=Z,n=v.object,J=!0;break}}}}catch(e){Q.e(e)}finally{Q.f()}if(J)continue}var te=[];if(Phaser.Geom.Intersects.GetLineToCircle(this._ray,K,te)){var ne,ie=i(te);try{for(ie.s();!(ne=ie.n()).done;){var re=ne.value,se=Phaser.Math.Distance.Between(this._ray.x1,this._ray.y1,re.x,re.y);se<s&&(s=se,e=re,n=v.object)}}catch(e){ie.e(e)}finally{ie.f()}}}}catch(e){$.e(e)}finally{$.f()}}}}}}catch(e){b.e(e)}finally{b.f()}if(o?(this._stats.rays++,this._stats.testedMappedObjects+=h.testedMappedObjects,this._stats.hitMappedObjects+=h.hitMappedObjects,this._stats.segments+=h.segments):(h.time=performance.now()-a,this._stats=h),e)(p=new Phaser.Geom.Point(e.x,e.y)).segment=t,p.object=n;else{if(this.ignoreNotIntersectedRays)return!1;p=this._ray.getPointB()}return this.round&&(p.x=Math.round(p.x),p.y=Math.round(p.y)),o||this.drawDebug([p]),p}n.d(t,{p:function(){return s}})},330:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.angle,n=[],r=[],s=[],o=[],a=performance.now();if(this._stats={method:"castCircle",rays:0,testedMappedObjects:0,hitMappedObjects:0,segments:0,time:0},!e.objects){if(!this._raycaster)return n;e.objects=this._raycaster.mappedObjects}if(this._raycaster&&this._raycaster.boundingBox){var h,c=i(this._raycaster.boundingBox.points);try{for(c.s();!(h=c.n()).done;){var l=h.value;s.push({point:l,angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,l.x,l.y)})}}catch(e){c.e(e)}finally{c.f()}}for(var u=0,y=e.objects.length;u<y;u++){var g=e.objects[u];if(this.boundsInRange(g)){o.push(g);var f=void 0,d=void 0;(d=(f="body"===g.type||"composite"===g.type?g.raycasterMap:g.data.get("raycasterMap")).getBoundingBox()).setTo(d.x-.1,d.y-.1,d.width+.2,d.height+.2),f._boundingBox=d,r.push(f);var p,b=i(f.getPoints(this));try{for(b.s();!(p=b.n()).done;){var m=p.value;s.push({point:m,angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,m.x,m.y)})}}catch(e){b.e(e)}finally{b.f()}for(var v=u+1,P=e.objects.length;v<P;v++){var x=e.objects[v],j=void 0;if(j="body"===x.type||"composite"===x.type?x.raycasterMap:x.data.get("raycasterMap"),Phaser.Geom.Intersects.RectangleToRectangle(f.getBoundingBox(),j.getBoundingBox())){var w,M=i(f.getSegments(this));try{for(M.s();!(w=M.n()).done;){var G,_=w.value,A=i(j.getSegments(this));try{for(A.s();!(G=A.n()).done;){var S=G.value,B=[];if(Phaser.Geom.Intersects.LineToLine(_,S,B)){var O={point:new Phaser.Geom.Point(B.x,B.y),angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,B.x,B.y)};O.point.intersection=!1,s.push(O)}}}catch(e){A.e(e)}finally{A.f()}}}catch(e){M.e(e)}finally{M.f()}}}}}s.sort(function(e,t){return e.angle==t.angle?Phaser.Math.Distance.Between(this.origin.x,this.origin.y,e.point.x,e.point.y)>Phaser.Math.Distance.Between(this.origin.x,this.origin.y,t.point.x,t.point.y)?1:-1:e.angle-t.angle}.bind(this));for(var L={angle:!1},T=0,C=s;T<C.length;T++){var R=C[T];if(R.angle!==L.angle){L=R,this.setAngle(R.angle);var I=this.cast({objects:o,target:R.point,internal:!0});if(I){var D=!1;if(this.round){var E=new Phaser.Geom.Point(Math.round(R.point.x),Math.round(R.point.y));D=Phaser.Geom.Point.Equals(E,I)}else D=Phaser.Geom.Point.Equals(R.point,I);if(D)if(!R.point.neighbours||R.point.neighbours.length<2);else if(Phaser.Math.Angle.Normalize(this.angle-Phaser.Math.Angle.BetweenPoints(this.origin,R.point.neighbours[0]))<1e-4||Phaser.Math.Angle.Normalize(this.angle-Phaser.Math.Angle.BetweenPoints(this.origin,R.point.neighbours[1]))<1e-4);else{var X=[],k=new Phaser.Geom.Triangle(R.point.x,R.point.y,R.point.neighbours[0].x,R.point.neighbours[0].y,R.point.neighbours[1].x,R.point.neighbours[1].y);Phaser.Geom.Intersects.GetTriangleToLine(k,this._ray,X);for(var N=0,Y=X;N<Y.length;N++){var W=Y[N];if(Math.abs(R.point.x-W.x)>1e-4&&Math.abs(R.point.y-W.y)>1e-4){D=!1;break}}}else;if(D){this.setAngle(R.angle-1e-4);var q=this.cast({objects:o,internal:!0});q&&n.push(q),n.push(I),this.setAngle(R.angle+1e-4);var z=this.cast({objects:o,internal:!0});z&&n.push(z);continue}n.push(I)}}}return this.setAngle(t),this.intersections=n,this.autoSlice&&(this.slicedIntersections=this.slice()),this._stats.time=performance.now()-a,this.drawDebug(n),n}n.d(t,{q:function(){return s}})},352:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.angle,s=[],o=[],a=[],h=[],c=this.cone,l=performance.now();if(this._stats={method:"castCone",rays:0,testedMappedObjects:0,hitMappedObjects:0,segments:0,time:0},void 0!==n.cone&&(c=n.cone),void 0!==n.coneDeg&&(c=Phaser.Math.DegToRad(n.coneDeg)),e=this.angle-c/2,t=this.angle+c/2,this.setAngle(e),a.push({point:this._ray.getPointB(),angle:e,angleOffsetDeg:Phaser.Math.RadToDeg(-c/2)}),this.setAngle(t),a.push({point:this._ray.getPointB(),angle:t,angleOffsetDeg:Phaser.Math.RadToDeg(c/2)}),!n.objects){if(!this._raycaster)return s;n.objects=this._raycaster.mappedObjects}if(this._raycaster&&this._raycaster.boundingBox){var u,y=i(this._raycaster.boundingBox.points);try{for(y.s();!(u=y.n()).done;){var g=u.value,f=Phaser.Math.Angle.Between(this.origin.x,this.origin.y,g.x,g.y),d=Phaser.Math.Angle.ShortestBetween(Phaser.Math.RadToDeg(f),Phaser.Math.RadToDeg(r));Math.abs(d)<Phaser.Math.RadToDeg(c/2)&&a.push({point:g,angle:f,angleOffsetDeg:-d})}}catch(e){y.e(e)}finally{y.f()}}for(var p=0,b=n.objects.length;p<b;p++){var m=n.objects[p];if(this.boundsInRange(m)){h.push(m);var v=void 0,P=void 0;(P=(v="body"===m.type||"composite"===m.type?m.raycasterMap:m.data.get("raycasterMap")).getBoundingBox()).setTo(P.x-.1,P.y-.1,P.width+.2,P.height+.2),v._boundingBox=P,o.push(v);var x,j=i(v.getPoints(this));try{for(j.s();!(x=j.n()).done;){var w=x.value,M=Phaser.Math.Angle.Between(this.origin.x,this.origin.y,w.x,w.y),G=Phaser.Math.Angle.ShortestBetween(Phaser.Math.RadToDeg(M),Phaser.Math.RadToDeg(r));Math.abs(G)<Phaser.Math.RadToDeg(c/2)&&a.push({point:w,angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,w.x,w.y),angleOffsetDeg:-G})}}catch(e){j.e(e)}finally{j.f()}for(var _=p+1,A=n.objects.length;_<A;_++){var S=n.objects[_],B=void 0;if(B="body"===S.type||"composite"===S.type?S.raycasterMap:S.data.get("raycasterMap"),Phaser.Geom.Intersects.RectangleToRectangle(v.getBoundingBox(),B.getBoundingBox())){var O,L=i(v.getSegments(this));try{for(L.s();!(O=L.n()).done;){var T,C=O.value,R=i(B.getSegments(this));try{for(R.s();!(T=R.n()).done;){var I=T.value,D=[];if(Phaser.Geom.Intersects.LineToLine(C,I,D)){var E=Phaser.Math.Angle.Between(this.origin.x,this.origin.y,D.x,D.y),X=Phaser.Math.Angle.ShortestBetween(Phaser.Math.RadToDeg(E),Phaser.Math.RadToDeg(r));Math.abs(X)<Phaser.Math.RadToDeg(c/2)&&a.push({point:new Phaser.Geom.Point(D.x,D.y),angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,D.x,D.y),angleOffsetDeg:-X})}}}catch(e){R.e(e)}finally{R.f()}}}catch(e){L.e(e)}finally{L.f()}}}}}a.sort(function(e,t){return e.angle==t.angle?Phaser.Math.Distance.Between(this.origin.x,this.origin.y,e.point.x,e.point.y)>Phaser.Math.Distance.Between(this.origin.x,this.origin.y,t.point.x,t.point.y)?1:-1:e.angleOffsetDeg-t.angleOffsetDeg}.bind(this));for(var k={angle:!1},N=0,Y=a;N<Y.length;N++){var W=Y[N];if(W.angle!==k.angle){k=W,this.setAngle(W.angle);var q=this.cast({objects:h,target:W.point,internal:!0});if(q){var z=!1;if(this.round){var F=new Phaser.Geom.Point(Math.round(W.point.x),Math.round(W.point.y));z=Phaser.Geom.Point.Equals(F,q)}else z=Phaser.Geom.Point.Equals(W.point,q);if(z)if(!W.point.neighbours||W.point.neighbours.length<2);else if(Phaser.Math.Angle.Normalize(this.angle-Phaser.Math.Angle.BetweenPoints(this.origin,W.point.neighbours[0]))<1e-4||Phaser.Math.Angle.Normalize(this.angle-Phaser.Math.Angle.BetweenPoints(this.origin,W.point.neighbours[1]))<1e-4);else{var U=[],H=new Phaser.Geom.Triangle(W.point.x,W.point.y,W.point.neighbours[0].x,W.point.neighbours[0].y,W.point.neighbours[1].x,W.point.neighbours[1].y);Phaser.Geom.Intersects.GetTriangleToLine(H,this._ray,U);for(var $=0,K=U;$<K.length;$++){var V=K[$];if(Math.abs(W.point.x-V.x)>1e-4&&Math.abs(W.point.y-V.y)>1e-4){z=!1;break}}}else;if(z){this.setAngle(W.angle-1e-4);var J=this.cast({objects:h,internal:!0});J&&s.push(J),s.push(q),this.setAngle(W.angle+1e-4);var Q=this.cast({objects:h,internal:!0});Q&&s.push(Q);continue}s.push(q)}}}return this.setAngle(r),this.intersections=s,this.autoSlice&&(this.slicedIntersections=this.slice(s,!1)),this._stats.time=performance.now()-l,this.drawDebug(s),s}n.d(t,{G:function(){return s}})},67:function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.cone=e,this}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.cone=Phaser.Math.DegToRad(e),this}n.d(t,{x:function(){return r},z:function(){return i}})},376:function(e,t,n){"use strict";function i(e){return this.object=e.object,void 0!==e.origin&&this.origin.setTo(e.origin.x,e.origin.y),void 0!==e.angle&&(this.angle=Phaser.Math.Angle.Normalize(e.angle)),void 0!==e.angleDeg&&(this.angle=Phaser.Math.Angle.Normalize(Phaser.Math.DegToRad(e.angleDeg))),void 0!==e.cone&&(this.cone=e.cone),void 0!==e.coneDeg&&(this.cone=Phaser.Math.DegToRad(e.coneDeg)),void 0!==e.rayRange&&(this.rayRange=e.rayRange),void 0!==e.collisionRange&&(this.collisionRange=e.collisionRange),void 0!==e.detectionRange&&(this.detectionRange=e.detectionRange),void 0!==e.ignoreNotIntersectedRays&&(this.ignoreNotIntersectedRays=1==e.ignoreNotIntersectedRays),void 0!==e.round&&(this.round=1==e.round),void 0!==e.autoSlice&&(this.autoSlice=1==e.autoSlice),void 0!==e.enablePhysics&&e.enablePhysics&&this.enablePhysics(e.enablePhysics),Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this.detectionRangeCircle.setTo(this.origin.x,this.origin.y,this.detectionRange),this._raycaster.debugOptions.enabled&&void 0!==this._raycaster.scene&&(this.graphics=this._raycaster.scene.add.graphics({lineStyle:{width:1,color:65280},fillStyle:{color:16711935}}),this.graphics.setDepth(1e3)),this}n.d(t,{v:function(){return i}})},737:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e){if(void 0===this.graphics||!this._raycaster.debugOptions.enabled)return this;if(this.graphics.clear(),!this._raycaster.debugOptions.rays)return this;if(this._raycaster.debugOptions.graphics.ray){this.graphics.lineStyle(1,this._raycaster.debugOptions.graphics.ray);var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.graphics.strokeLineShape({x1:this.origin.x,y1:this.origin.y,x2:r.x,y2:r.y})}}catch(e){n.e(e)}finally{n.f()}}if(this._raycaster.debugOptions.graphics.rayPoint){this.graphics.fillStyle(this._raycaster.debugOptions.graphics.rayPoint),this.graphics.fillPoint(this.origin.x,this.origin.y,3);var s,o=i(e);try{for(o.s();!(s=o.n()).done;){var a=s.value;this.graphics.fillPoint(a.x,a.y,3)}}catch(e){o.e(e)}finally{o.f()}}return this}n.d(t,{K:function(){return s}})},645:function(e,t,n){"use strict";function i(){for(var e in this.graphics&&this.graphics.destroy(),this)delete this[e]}n.d(t,{o:function(){return i}})},847:function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"arcade";if(void 0!==this.body)return this;if(this.collisionCircle=this._raycaster.scene.add.circle(this.origin.x,this.origin.y,this.collisionRange),this.collisionCircle._ray=this,"matter"===e){if(this.bodyType="matter",this.collisionRange==Phaser.Math.MAX_SAFE_INTEGER){var t=this._raycaster.boundingBox;this._raycaster.scene.matter.add.gameObject(this.collisionCircle,{shape:{type:"rectangle",x:t.rectangle.centerX,y:t.rectangle.centerY,width:t.rectangle.width,height:t.rectangle.height},label:"phaser-raycaster-ray-body",isSensor:!0,ignoreGravity:!0})}else this._raycaster.scene.matter.add.gameObject(this.collisionCircle,{shape:{type:"circle"},label:"phaser-raycaster-ray-body",isSensor:!0,ignoreGravity:!0});this.body=this.collisionCircle.body,this.body._ray=this,this.setOnCollideActive()}else this.bodyType="arcade",this._raycaster.scene.physics.add.existing(this.collisionCircle),this.body=this.collisionCircle.body,this.body.setCircle(this.collisionRange).setAllowGravity(!1).setImmovable(!0),this.body._ray=this;return this}n.d(t,{W:function(){return i}})},729:function(e,t,n){"use strict";function i(e){return this.body.collisionFilter.category=e,this}function r(e){return this.body.collisionFilter.group=e,this}function s(e){var t=0;if(Array.isArray(e))for(var n=0;n<e.length;n++)t|=e[n];else t=e;return this.body.collisionFilter.mask=t,this}function o(e){var t=this;return this.body.onCollideCallback=function(n){n.rayCollided?e(n):t.processOverlap(n)&&(n.rayCollided=!0,e(n))},this}function a(e){return this.body.onCollideEndCallback=function(t){t.rayCollided&&(t.rayCollided=!1,e(t))},this}function h(e){var t=this;return this.body.onCollideActiveCallback=function(n){if(t.processOverlap(n)){var i="phaser-raycaster-ray-body"===n.bodyA.label?n.bodyB:n.bodyA;!0!==n.rayCollided&&(n.rayCollided=!0,t.body.onCollideCallback&&t.body.onCollideCallback(n),void 0!==t.body.onCollideWith&&t.body.onCollideWith[i.id]&&t.body.onCollideWith[i.id](i,n)),e&&e(n)}else t.body.onCollideEndCallback&&!0===n.rayCollided&&t.body.onCollideEndCallback(n)},this}function c(e,t){var n=this,i=function(e,i){i.rayCollided?t(e,i):n.processOverlap(i)&&(i.rayCollided=!0,t(e,i))};Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var s=e[r].hasOwnProperty("body")?e[r].body:e[r];this.body.setOnCollideWith(s,i)}return this}n.d(t,{B5:function(){return r},Jt:function(){return o},f3:function(){return s},iN:function(){return a},kK:function(){return h},wy:function(){return c},y4:function(){return i}})},262:function(e,t,n){"use strict";function i(e,t){return this.origin.setTo(e,t),Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this.detectionRangeCircle.setTo(this.origin.x,this.origin.y,this.detectionRange),("matter"===this.bodyType&&this.collisionRange!==Phaser.Math.MAX_SAFE_INTEGER||"arcade"===this.bodyType)&&(this.collisionCircle.x=e,this.collisionCircle.y=t),this}n.d(t,{j:function(){return i}})},72:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e){var t=[],n=new Phaser.Geom.Circle(this.origin.x,this.origin.y,this.collisionRange);if("matter"===this.bodyType){if(void 0===e){var r,s=i(e=this._raycaster.scene.matter.query.collides(this.body,this._raycaster.scene.matter.getMatterBodies()));try{for(s.s();!(r=s.n()).done;){var o=r.value,a=o.bodyA===this.body?o.bodyB:o.bodyA;this.testMatterOverlap(a)&&t.push(a)}}catch(e){s.e(e)}finally{s.f()}}else{Array.isArray(e)||(e=[e]);var h,c=i(e);try{for(c.s();!(h=c.n()).done;){var l=h.value;l!==this.body&&(this.testMatterOverlap(l)&&t.push(l))}}catch(e){c.e(e)}finally{c.f()}}}else{var u=!1;if(void 0===e?(e=this._raycaster.scene.physics.overlapCirc(this.origin.x,this.origin.y,this.collisionRange,!0,!0),u=!0):Array.isArray(e)||(e=[e]),u){var y,g=i(e);try{for(g.s();!(y=g.n()).done;){var f=y.value;if(f!==this.body){var d=void 0;d=f.isCircle?new Phaser.Geom.Circle(f.position.x+f.halfWidth,f.position.y+f.halfWidth,f.halfWidth):new Phaser.Geom.Rectangle(f.x,f.y,f.width,f.height),this.testArcadeOverlap(d)&&t.push(f.gameObject)}}}catch(e){g.e(e)}finally{g.f()}}else{var p,b=i(e);try{for(b.s();!(p=b.n()).done;){var m=p.value;if(void 0!==m.body){var v=void 0;if(m.body.isCircle){if(v=new Phaser.Geom.Circle(m.body.position.x+m.body.halfWidth,m.body.position.y+m.body.halfWidth,m.body.halfWidth),!Phaser.Geom.Intersects.CircleToCircle(n,v))continue}else if(v=new Phaser.Geom.Rectangle(m.body.x,m.body.y,m.body.width,m.body.height),!Phaser.Geom.Intersects.CircleToRectangle(n,v))continue;this.testArcadeOverlap(v)&&t.push(m)}}}catch(e){b.e(e)}finally{b.f()}}}return t}function o(e,t){var n,i,r;if(void 0!==e.bodyA&&void 0!==e.bodyB?(n=e.bodyA,i=e.bodyB):(n=e,i=t),void 0!==n._ray&&n._ray===this)r=i;else{if(void 0===i._ray||i._ray!==this)return!1;r=n}return this.overlap(r).length>0}function a(e){var t,n=i(this.slicedIntersections);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(0==e.type?Phaser.Geom.Intersects.TriangleToCircle(r,e):Phaser.Geom.Intersects.RectangleToTriangle(e,r))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}function h(e){var t;if("body"===e.type)t=e;else{if(void 0===e.body)return!1;t=e.body}var n,r=i(t.parts.length>1?t.parts.splice(1):t.parts);try{for(r.s();!(n=r.n()).done;){for(var s=n.value,o=s.vertices[0],a=1,h=s.vertices.length;a<h;a++){var c,l=s.vertices[a],u=new Phaser.Geom.Line(o.x,o.y,l.x,l.y),y=i(this.slicedIntersections);try{for(y.s();!(c=y.n()).done;){var g=c.value,f=Phaser.Geom.Intersects.TriangleToLine(g,u);if(f||(f=Phaser.Geom.Triangle.ContainsPoint(g,u.getPointA())),f||(f=Phaser.Geom.Triangle.ContainsPoint(g,u.getPointB())),f)return!0}}catch(e){y.e(e)}finally{y.f()}o=l}var d,p=new Phaser.Geom.Line(s.vertices[s.vertices.length-1].x,s.vertices[s.vertices.length-1].y,s.vertices[0].x,s.vertices[0].y),b=i(this.slicedIntersections);try{for(b.s();!(d=b.n()).done;){var m=d.value;if(Phaser.Geom.Intersects.TriangleToLine(m,p))return!0}}catch(e){b.e(e)}finally{b.f()}}}catch(e){r.e(e)}finally{r.f()}return!1}n.d(t,{at:function(){return s},h2:function(){return a},jD:function(){return o},z_:function(){return h}})},533:function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Phaser.Math.MAX_SAFE_INTEGER;return this.rayRange=e,Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.detectionRange=e,this.detectionRangeCircle.setTo(this.origin.x,this.origin.y,this.detectionRange),this}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Phaser.Math.MAX_SAFE_INTEGER,t=this.collisionRange==Phaser.Math.MAX_SAFE_INTEGER;if(this.collisionRange=e,this.collisionCircle.setRadius(this.collisionRange),"matter"===this.bodyType){if(this.collisionRange==Phaser.Math.MAX_SAFE_INTEGER){var n=this._raycaster.boundingBox;this._raycaster.scene.matter.body.set(this.body,{shape:{type:"rectangle",x:n.rectangle.centerX,y:n.rectangle.centerY,width:n.rectangle.width,height:n.rectangle.height,circleRadius:0}})}else t?this._raycaster.scene.matter.body.set(this.body,{shape:{type:"circle",x:this.collisionCircle.x,y:this.collisionCircle.y},circleRadius:this.collisionRange,isStatic:!1}):this.collisionCircle.setRadius(this.collisionRange);this._raycaster.scene.matter.body.set(this.body,"circleRadius",this.collisionRange)}else"arcade"===this.bodyType&&this.body.setCircle(this.collisionRange);return this}function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.detectionRange||(t=n||("body"===e.type||"composite"===e.type?e.raycasterMap.getBoundingBox():e.data.get("raycasterMap").getBoundingBox()),!!Phaser.Geom.Intersects.CircleToRectangle(this.detectionRangeCircle,t))}n.d(t,{HL:function(){return i},lG:function(){return s},qw:function(){return r},sp:function(){return o}})},426:function(e,t,n){"use strict";function i(e,t){this._raycaster=t||!1,this.origin=new Phaser.Geom.Point,this._ray=new Phaser.Geom.Line,this.angle=0,this.cone=0,this.rayRange=Phaser.Math.MAX_SAFE_INTEGER,this.detectionRange=0,this.detectionRangeCircle=new Phaser.Geom.Circle,this.collisionRange=Phaser.Math.MAX_SAFE_INTEGER,this.ignoreNotIntersectedRays=!0,this.round=!1,this.autoSlice=!1,this.intersections=[],this.slicedIntersections=[],this.bodyType=!1,this._stats={method:"cast",rays:0,testedMappedObjects:0,hitMappedObjects:0,segments:0,time:0},this.graphics,this.config(e)}n.d(t,{z:function(){return i}}),i.prototype={config:n(376).v,getStats:n(414).f,setRay:n(394).R,setOrigin:n(262).j,setRayRange:n(533).HL,setAngle:n(519).e,setAngleDeg:n(519).m,setCone:n(67).z,setConeDeg:n(67).x,setDetectionRange:n(533).qw,boundsInRange:n(533).sp,cast:n(157).p,castCircle:n(330).q,castCone:n(352).G,slice:n(663).t,setCollisionRange:n(533).lG,enablePhysics:n(847).W,overlap:n(72).at,processOverlap:n(72).jD,testArcadeOverlap:n(72).h2,testMatterOverlap:n(72).z_,setCollisionCategory:n(729).y4,setCollisionGroup:n(729).B5,setCollidesWith:n(729).f3,setOnCollide:n(729).Jt,setOnCollideEnd:n(729).iN,setOnCollideActive:n(729).kK,setOnCollideWith:n(729).wy,drawDebug:n(737).K,destroy:n(645).o}},394:function(e,t,n){"use strict";function i(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Phaser.Math.MAX_SAFE_INTEGER;return this.origin.setTo(e,t),this.angle=Phaser.Math.Angle.Normalize(n),this.rayRange=i,Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this.detectionRangeCircle.setTo(this.origin.x,this.origin.y,this.detectionRange),this}n.d(t,{R:function(){return i}})},663:function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.intersections,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(4!==e.type)return[];e=e.points}if(0===e.length)return[];for(var n=[],i=0,r=e.length-1;i<r;i++)n.push(new Phaser.Geom.Triangle(this.origin.x,this.origin.y,e[i].x,e[i].y,e[i+1].x,e[i+1].y));return t&&n.push(new Phaser.Geom.Triangle(this.origin.x,this.origin.y,e[0].x,e[0].y,e[e.length-1].x,e[e.length-1].y)),n}n.d(t,{t:function(){return i}})},414:function(e,t,n){"use strict";function i(){return this._stats}n.d(t,{f:function(){return i}})},741:function(e,t,n){"use strict";function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){h=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(h)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)
/**
* @author       Marcin Walczak <contact@marcin-walczak.pl>
* @copyright    2023 Marcin Walczak
* @license      {@link https://github.com/wiserim/phaser-raycaster/blob/master/LICENSE|MIT License}
*/}function o(e){if(this.version="0.10.7",this.scene,this.graphics,this.debugOptions={enabled:!1,maps:!0,rays:!0,graphics:{ray:65280,rayPoint:16711935,mapPoint:65535,mapSegment:255,mapBoundingBox:16711680}},this._stats={mappedObjects:{total:0,static:0,dynamic:0,rectangleMaps:0,polygonMaps:0,circleMaps:0,lineMaps:0,containerMaps:0,tilemapMaps:0,matterMaps:0}},this.boundingBox=!1,this.mappedObjects=[],this.dynamicMappedObjects=[],this.mapSegmentCount=0,void 0!==e){if(void 0===e.boundingBox&&void 0!==e.scene)if(void 0!==e.scene.physics)e.boundingBox=e.scene.physics.world.bounds;else if(void 0!==e.scene.matter){var t=e.scene.matter.world.walls;null!==t.top&&(e.boundingBox=new Phaser.Geom.Rectangle(t.top.vertices[3].x,t.top.vertices[3].y,t.bottom.vertices[1].x-t.top.vertices[3].x,t.bottom.vertices[1].y-t.top.vertices[3].y))}this.setOptions(e),(void 0===e.autoUpdate||e.autoUpdate)&&this.scene.events.on("update",this.update,this)}else this.scene.events.on("update",this.update,this);return this}n.d(t,{i:function(){return o}}),o.prototype={setOptions:function(e){return void 0!==e.scene&&(this.scene=e.scene,this.graphics=this.scene.add.graphics({lineStyle:{width:1,color:65280},fillStyle:{color:16711935}}),this.graphics.setDepth(999)),void 0!==e.debug&&!1!==e.debug&&(this.debugOptions.enabled=!0,"object"===s(e.debug)&&Object.assign(this.debugOptions,e.debug)),void 0!==e.mapSegmentCount&&(this.mapSegmentCount=e.mapSegmentCount),void 0!==e.objects&&this.mapGameObjects(e.objects),void 0!==e.boundingBox&&this.setBoundingBox(e.boundingBox.x,e.boundingBox.y,e.boundingBox.width,e.boundingBox.height),this},setBoundingBox:function(e,t,n,i){this.boundingBox={rectangle:new Phaser.Geom.Rectangle(e,t,n,i),points:[],segments:[]};var r=[new Phaser.Geom.Point(this.boundingBox.rectangle.left,this.boundingBox.rectangle.top),new Phaser.Geom.Point(this.boundingBox.rectangle.right,this.boundingBox.rectangle.top),new Phaser.Geom.Point(this.boundingBox.rectangle.right,this.boundingBox.rectangle.bottom),new Phaser.Geom.Point(this.boundingBox.rectangle.left,this.boundingBox.rectangle.bottom)];this.boundingBox.points=r;for(var s=0,o=this.boundingBox.points.length;s<o;s++)s+1<o?this.boundingBox.segments.push(new Phaser.Geom.Line(r[s].x,r[s].y,r[s+1].x,r[s+1].y)):this.boundingBox.segments.push(new Phaser.Geom.Line(r[s].x,r[s].y,r[0].x,r[0].y))},mapGameObjects:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.dynamic=t,n.segmentCount=void 0!==n.segmentCount?n.segmentCount:this.segmentCount,Array.isArray(e)||(e=[e]);var r,s=i(e);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(!this.mappedObjects.includes(o)&&(!o.data||!o.data.get("raycasterMapNotSupported"))){var a={};for(var h in n)a[h]=n[h];a.object=o;var c=new this.Map(a,this);if(c.notSupported)c.destroy();else switch("body"===o.type||"composite"===o.type?o.raycasterMap=c:(o.data||o.setDataEnabled(),o.data.set("raycasterMap",c)),this.mappedObjects.push(o),o.type){case"Polygon":this._stats.mappedObjects.polygonMaps++;break;case"Arc":this._stats.mappedObjects.circleMaps++;break;case"Line":this._stats.mappedObjects.lineMaps++;break;case"Container":this._stats.mappedObjects.containerMaps++;break;case"StaticTilemapLayer":case"DynamicTilemapLayer":case"TilemapLayer":this._stats.mappedObjects.tilemapMaps++;break;case"MatterBody":this._stats.mappedObjects.matterMaps++;break;default:this._stats.mappedObjects.rectangleMaps++}}}}catch(e){s.e(e)}finally{s.f()}return this._stats.mappedObjects.total=this.mappedObjects.length,this._stats.mappedObjects.static=this._stats.mappedObjects.total-this.dynamicMappedObjects.length,this},removeMappedObjects:function(e){Array.isArray(e)||(e=[e]);var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,s=this.mappedObjects.indexOf(r);if(-1!==s)switch(this.mappedObjects.splice(s,1),(s=this.dynamicMappedObjects.indexOf(r))>=0&&this.dynamicMappedObjects.splice(s,1),"body"===r.type||"composite"===r.type?r.raycasterMap.destroy():r.data.get("raycasterMap").destroy(),r.type){case"Polygon":this._stats.mappedObjects.polygonMaps--;break;case"Arc":this._stats.mappedObjects.circleMaps--;break;case"Line":this._stats.mappedObjects.lineMaps--;break;case"Container":this._stats.mappedObjects.containerMaps--;break;case"StaticTilemapLayer":case"DynamicTilemapLayer":case"TilemapLayer":this._stats.mappedObjects.tilemapMaps--;break;case"MatterBody":this._stats.mappedObjects.matterMaps--;break;default:this._stats.mappedObjects.rectangleMaps--}}}catch(e){n.e(e)}finally{n.f()}return this._stats.mappedObjects.total=this.mappedObjects.length,this._stats.mappedObjects.dynamic=this.dynamicMappedObjects.length,this._stats.mappedObjects.static=this._stats.mappedObjects.total-this.dynamicMappedObjects.length,this},enableMaps:function(e){Array.isArray(e)||(e=[e]);var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,s=void 0;"body"===r.type||"composite"===r.type?s=r.raycasterMap:r.data&&(s=r.data.get("raycasterMap")),s&&(s.active=!0)}}catch(e){n.e(e)}finally{n.f()}return this},disableMaps:function(e){Array.isArray(e)||(e=[e]);var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,s=void 0;"body"===r.type||"composite"===r.type?s=r.raycasterMap:r.data&&(s=r.data.get("raycasterMap")),s&&(s.active=!1)}}catch(e){n.e(e)}finally{n.f()}return this},update:function(){if(this.dynamicMappedObjects.length>0){var e,t=i(this.dynamicMappedObjects);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=void 0;"body"===n.type||"composite"===n.type?r=n.raycasterMap:n.data&&(r=n.data.get("raycasterMap")),r&&(r.active&&r.updateMap())}}catch(e){t.e(e)}finally{t.f()}}return this.debugOptions.enabled&&this.drawDebug(),this},createRay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new this.Ray(e,this)},getStats:function(){return this._stats},drawDebug:function(){if(void 0===this.graphics||!this.debugOptions.enabled)return this;if(this.graphics.clear(),!this.debugOptions.maps)return this;var e,t=i(this.mappedObjects);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=void 0;if("body"===n.type||"composite"===n.type?r=n.raycasterMap:n.data&&(r=n.data.get("raycasterMap")),r){if(this.debugOptions.graphics.mapBoundingBox&&(this.graphics.lineStyle(1,this.debugOptions.graphics.mapBoundingBox),this.graphics.strokeRectShape(r.getBoundingBox())),this.debugOptions.graphics.mapSegment){this.graphics.lineStyle(1,this.debugOptions.graphics.mapSegment);var s,o=i(r.getSegments());try{for(o.s();!(s=o.n()).done;){var a=s.value;this.graphics.strokeLineShape(a)}}catch(e){o.e(e)}finally{o.f()}}if(this.debugOptions.graphics.mapPoint){this.graphics.fillStyle(this.debugOptions.graphics.mapPoint);var h,c=i(r.getPoints());try{for(c.s();!(h=c.n()).done;){var l=h.value;this.graphics.fillPoint(l.x,l.y,3)}}catch(e){c.e(e)}finally{c.f()}}}}}catch(e){t.e(e)}finally{t.f()}return this},destroy:function(){for(var e in this.removeMappedObjects(this.mappedObjects),this.graphics&&this.graphics.destroy(),this.scene&&this.scene.events.removeListener("update",null,this),this)delete this[e]}},o.prototype.Map=n(667).D,o.prototype.Ray=n(426).z}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}return n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(880)}()}));
//# sourceMappingURL=phaser-raycaster.min.js.map